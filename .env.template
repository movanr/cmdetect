################################################################################
# CMDetect Portable Configuration
#
# This file contains portable, non-secret configuration that can be tracked in git.
# Server-specific secrets should be stored in /var/www/cmdetect/.env
#
# Copy this file to /opt/cmdetect/.env on your server.
# Then create /var/www/cmdetect/.env with your secrets (see server.env.example)
################################################################################

# ENVIRONMENT
DOMAIN=${DOMAIN}

# Node Environment
NODE_ENV=production

################################################################################
# DATABASE CONFIGURATION (Shared by Better Auth + Hasura)
################################################################################

POSTGRES_DB=cmdetect
POSTGRES_USER=postgres
POSTGRES_PORT=5432

################################################################################
# HASURA CONFIGURATION
################################################################################

HASURA_PORT=8080
HASURA_GRAPHQL_JWT_SECRET={"jwk_url":"http://auth-server:3001/api/auth/jwks"}
HASURA_GRAPHQL_UNAUTHORIZED_ROLE=public
HASURA_GRAPHQL_ENABLE_CONSOLE=false
HASURA_GRAPHQL_DEV_MODE=false
HASURA_GRAPHQL_ENABLED_LOG_TYPES=startup,http-log,webhook-log
HASURA_GRAPHQL_CORS_DOMAIN=https://*.${DOMAIN}
DATA_CONNECTOR_PORT=8081
DATA_CONNECTOR_LOG_LEVEL=ERROR

################################################################################
# AUTH SERVER CONFIGURATION (Docker Container)
################################################################################

# CORS Origins
FRONTEND_URL=https://app.${DOMAIN}
PATIENT_FRONTEND_URL=https://patient.${DOMAIN}

################################################################################
# SMTP CONFIGURATION (Optional - for Email Verification)
################################################################################

# Email service (Gmail, SendGrid, AWS SES, etc.)
# Uncomment and configure if you want email verification:
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password
# SMTP_FROM=noreply@${DOMAIN}

################################################################################
# BACKUP CONFIGURATION (Optional)
################################################################################

# Hetzner Storage Box (for rclone backups)
# RCLONE_REMOTE=hetzner
# RCLONE_PATH=backups/cmdetect